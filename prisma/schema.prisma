// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
    output   = "../generated/prisma"
}

datasource db {
    provider = "postgresql"
    // NOTE: When using mysql or sqlserver, uncomment the @db.Text annotations in model Account below
    // Further reading:
    // https://next-auth.js.org/adapters/prisma#create-the-prisma-schema
    // https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#string
    url      = env("DATABASE_URL")
}



enum Role {
    USER
    ADMIN
}

model User {
    id                String     @id @default(uuid()) @db.Uuid
    phone_number      String
    password          String
    email             String
    role              Role
    bookings          Booking[]
    booths            Booth[]
    reviews           Review[]
}

enum BoothType {
    FREE
    BOOKING
}

model Booth {
    id                String     @id @default(uuid()) @db.Uuid
    name              String
    price             Float
    is_available      Boolean    @default(false)
    type              BoothType
    latitude          Decimal    @db.Decimal(10, 8)
    longitude         Decimal    @db.Decimal(11, 8)
    images            Image[]
    bookings          Booking[]
    // Relation with User model
    user_id           String     @db.Uuid
    user              User       @relation(fields: [user_id], references: [id])
}

model Image {
    id                String     @id @default(uuid()) @db.Uuid
    path              String
    // Relation with Booth model
    booth_id          String     @db.Uuid
    booth             Booth      @relation(fields: [booth_id], references: [id])
}

//TODO: Correct payment_status type
model Booking {
    id                String     @id @default(uuid()) @db.Uuid
    start_date        DateTime
    end_date          DateTime
    total_price       Float
    payment_status    String
    payment_slip_url  String
    // Relation with User model
    user_id           String     @db.Uuid
    user              User       @relation(fields: [user_id], references: [id])
    // Relation with Booth model
    booth_id          String     @db.Uuid
    booth             Booth      @relation(fields: [booth_id], references: [id])
}

model Review {
    id                String     @id @default(uuid()) @db.Uuid
    rating            Int
    comment           String?
    created_at        DateTime   @default(now())
    // Relation with User model
    user_id           String     @db.Uuid
    user              User       @relation(fields: [user_id], references: [id])
}